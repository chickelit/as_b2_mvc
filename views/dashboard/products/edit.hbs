<html lang="pt-br">

<head>
	<meta charset="UTF-8" />
	<title>Ame Açaí - Dashboard</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet" />
	<style>
		:root {
			--roxo: #6d2e91;
			--rosa: #ff4f81;
			--verde: #60c28b;
			--branco:
				#ffffff;
			--cinza-claro: #f7f7f7;
			--texto: #2d1e2f;
		}

		* {
			box-sizing:
				border-box;
			margin: 0;
			padding: 0;
		}

		body {
			font-family: 'Fredoka',
				sans-serif;
			background: var(--cinza-claro);
			color: var(--texto);
			min-height: 100vh;
			padding: 24px;
			display: flex;
			flex-direction: column;
			align-items: center;
		}

		header {
			width: 100%;
			max-width: 960px;
			margin-bottom: 32px;
			text-align: center;
		}

		header h1 {
			font-size: 2.5rem;
			color: var(--roxo);
			margin-bottom: 8px;
		}

		header span {
			color:
				var(--rosa);
		}

		nav ul {
			list-style: none;
			display: flex;
			justify-content:
				center;
			gap: 16px;
			margin-top: 12px;
		}

		nav a {
			text-decoration: none;
			font-weight: 600;
			color: var(--roxo);
			padding: 8px 16px;
			border-radius:
				8px;
			transition: 0.2s;
		}

		nav a:hover {
			background-color: var(--roxo);
			color: var(--branco);
		}

		.add-btn {
			display: inline-block;
			background:
				var(--rosa);
			color: var(--branco);
			padding: 12px 24px;
			border-radius:
				12px;
			font-weight: 600;
			font-size: 1rem;
			text-decoration: none;
			margin-bottom: 32px;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
			transition:
				background 0.2s;
		}

		.add-btn:hover {
			background: var(--roxo);
		}

		.card,
		form {
			background: var(--branco);
			border-radius: 16px;
			padding: 24px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
			max-width: 600px;
			width: 100%;
			margin-bottom: 24px;
		}

		.card h2,
		form h2 {
			font-size: 1.5rem;
			color:
				var(--roxo);
			margin-bottom: 12px;
		}

		.card p {
			margin-bottom: 8px;
			font-size: 1.05rem;
		}

		.card a {
			display: inline-block;
			margin-top: 16px;
			margin-right: 12px;
			padding: 10px 20px;
			background: var(--verde);
			color:
				var(--branco);
			border-radius: 8px;
			text-decoration: none;
			font-weight:
				600;
			transition: background 0.2s;
		}

		.card a:last-child {
			background:
				var(--rosa);
		}

		.card a:hover {
			background: var(--roxo);
		}

		label {
			font-weight: 600;
			color: var(--roxo);
			display: block;
			margin-top: 12px;
		}

		input,
		textarea {
			width: 100%;
			padding: 10px;
			border-radius: 8px;
			border:
				1px solid #ccc;
			margin-top: 6px;
			margin-bottom: 12px;
			font-size: 1rem;
		}

		button {
			background: var(--verde);
			color: var(--branco);
			font-weight:
				bold;
			border: none;
			border-radius: 8px;
			padding: 12px;
			font-size: 1rem;
			cursor: pointer;
			transition: background 0.2s;
		}

		button:hover {
			background:
				var(--roxo);
		}

		ul.products-list {
			list-style: none;
			padding: 0;
			width:
				100%;
			max-width: 600px;
		}

		ul.products-list li {
			width: 100%;
			background: var(--branco);
			border: 1px solid #eee;
			border-radius: 12px;
			padding: 16px 20px;
			margin-bottom: 16px;
			display: flex;
			justify-content: space-between;
			align-items: center;
			transition: box-shadow 0.2s;
		}

		ul.products-list li:hover {
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
		}

		ul.products-list li a {
			color: var(--roxo);
			font-weight: 600;
			text-decoration: none;
		}

		ul.products-list li a:hover {
			text-decoration: underline;
		}

		.error-list {
			background: #ffeaea;
			color: #a10000;
			padding: 16px 24px;
			border-radius:
				12px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
			margin-bottom: 24px;
			width:
				100%;
			max-width: 600px;
		}

		.upload-label {
			width: 100%;
			text-align: center;
			display: inline-block;
			padding: 10px 20px;
			background-color: #2563eb;
			color: white;
			cursor: pointer;
			border-radius: 32px;
			font-weight:
				bold;
		}

		.file-upload {}

		.preview-area {
			margin-top: 15px;
			margin-bottom: 15px;
		}

		.preview-area img {
			object-fit: cover;
			max-height: 160px;
			aspect-ratio: 1 / 1;
			display: block;
			border: 1px solid #ccc;
			border-radius: 32px;
		}
	</style>
</head>

<body>
	<header>
		<h1>Ame <span>Açaí</span></h1>
		<nav>
			<ul>
				<li><a href="/dashboard/products">Produtos</a></li>
			</ul>
		</nav>
	</header>

	{{#if errors}}
	<ul class="error-list">
		{{#each errors}}
		<li>{{this.msg}}</li>
		{{/each}}
	</ul>
	{{/if}}


	{{#if success}}
	<div
		style="background:#e6ffe6; color:#2d1e2f; border-radius:12px; padding:16px 24px; margin-bottom:24px; width:100%; max-width:600px; box-shadow:0 2px 8px rgba(0,0,0,0.05);">
		{{success}}
	</div>
	{{/if}}


	{{#if product}}
	<form action="/api/dashboard/products/edit/{{product.id}}" method="POST" enctype="multipart/form-data">
		<h2>Editar Produto</h2>
		<label for="name">Nome:</label>
		<input type="text" id="name" name="name" value="{{product.name}}" required />

		<label for="descricao">Descrição:</label>
		<textarea id="descricao" name="descricao" required>{{product.descricao}}</textarea>

		<label for="preco">Preço:</label>
		<input type="number" id="preco" name="preco" value="{{product.preco}}" step="0.01" required />

		<label role="button" for="image" class="upload-label">Adicionar imagem (opcional)</label>
		<input type="file" id="image" name="image" accept="image/*" hidden />
		<div id="preview" class="preview-area"></div>

		<button type="submit">Salvar</button>
	</form>
	<a href="/dashboard/products">Voltar</a>
	{{else if productsWithPagination}}
	<ul class="products-list">
		{{#each productsWithPagination.products}}
		<li>
			<a href="/dashboard/products/show/{{this.id}}">{{this.name}}</a>
			<span>R$ {{this.preco}}</span>
		</li>
		{{/each}}
	</ul>
	{{/if}}


	<script>
		const fileInput = document.getElementById('image'); const preview = document.getElementById('preview');
		fileInput.addEventListener('change', () => {
			const file = fileInput.files[0]; if (file && file.type.startsWith('image/')) {
				const
				reader = new FileReader(); reader.onload = (e) => { preview.innerHTML = '<img src="' + e.target.result + '" alt="Image preview">'; };
				reader.readAsDataURL(file);
			} else { preview.innerHTML = ''; }
		});
	</script>
</body>

</html>